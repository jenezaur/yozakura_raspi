

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>rpi package &mdash; Yozakura 1.0 RC documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Yozakura 1.0 RC documentation" href="index.html"/>
        <link rel="up" title="Technical Documentation" href="modules.html"/>
        <link rel="prev" title="opstn package" href="opstn.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> Yozakura
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Hardware and Software Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="setup.html#environment-setup">Environment setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="setup.html#ubuntu-setup">Ubuntu setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="setup.html#raspbian-setup">Raspbian setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#peripherals">Peripherals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="setup.html#contec">CONTEC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="setup.html#contec-station-connected-to-base-station">CONTEC station (connected to base station)</a></li>
<li class="toctree-l4"><a class="reference internal" href="setup.html#contec-access-point-connected-to-rpi">CONTEC access point (connected to RPi)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="setup.html#cameras">Cameras</a><ul>
<li class="toctree-l4"><a class="reference internal" href="setup.html#ai-ball-access-point-elecom">Ai-Ball access point (elecom)</a></li>
<li class="toctree-l4"><a class="reference internal" href="setup.html#camera-ip-addresses">Camera IP addresses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="setup.html#urg-ust-10lx">URG (UST-10LX)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#hardware-setup">Hardware setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="setup.html#wiring">Wiring</a><ul>
<li class="toctree-l4"><a class="reference internal" href="setup.html#raspberry-pi">Raspberry Pi</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Technical Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="common.html">common package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="common.html#module-common">Module contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="common.html#module-common.exceptions">common.exceptions module</a></li>
<li class="toctree-l3"><a class="reference internal" href="common.html#module-common.functions">common.functions module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="opstn.html">opstn package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="opstn.html#module-opstn">Module contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="opstn.html#module-opstn.controller">opstn.controller module</a></li>
<li class="toctree-l3"><a class="reference internal" href="opstn.html#module-opstn.server">opstn.server module</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="">rpi package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-rpi">Module contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-rpi.bitfields">rpi.bitfields module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-rpi.client">rpi.client module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-rpi.devices">rpi.devices module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rpi-mbed-module">rpi.mbed module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-rpi.motor">rpi.motor module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Yozakura</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="modules.html">Technical Documentation</a> &raquo;</li>
      
    <li>rpi package</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/rpi.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="rpi-package">
<h1>rpi package<a class="headerlink" href="#rpi-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-rpi">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-rpi" title="Permalink to this headline">¶</a></h2>
<p>Modules for the Raspberry Pi.</p>
<p>The Raspberry Pi is on the Yozakura. It communicates with:</p>
<ul class="simple">
<li>the base station via a Contec router attached by an Ethernet cable</li>
<li>two mbed microcontrollers connected via USB</li>
<li>various devices connected via I2C</li>
</ul>
<p>The Raspberry Pi&#8217;s client module receives speed commands from the base station,
and relays them to the mbeds to control the motors and arm. In addition, it
sends back data about flipper positions, current sensor measurements, pose
information, arm position and status, temperature measurements, and CO<sub>2</sub>
readings.</p>
</div>
<div class="section" id="module-rpi.bitfields">
<span id="rpi-bitfields-module"></span><h2>rpi.bitfields module<a class="headerlink" href="#module-rpi.bitfields" title="Permalink to this headline">¶</a></h2>
<p>Provide bitfields for Yozakura.</p>
<p>A bitfield is a structure used to store neighbouring bits where each set of
bits, and individual bits, can be addressed. Yozakura uses them to represent
flags, or a packed bit.</p>
<p>These bitfields typically fit into either a single byte, or a word. They allow
easy-to-use bit manipulation, and help prevent manipulation mistakes.</p>
<p>In Yozakura, we use both the structures holding the named bits themselves, as
well as unions which allow us to address the full byte or word at one time.
This makes it easy to store data simultaneously, or to transmit it.</p>
<p>The structure needs _fields_ to be filled as a list of 2-tuples containing
the field name and the type. Optionally, you can add a third entry to the
tuple containing the number of bits to be used.</p>
<p class="rubric">Examples</p>
<p>These examples use MotorPacket, defined below, to illustrate how bitfields
work, and to compare them to bit manipulation, which you might already know.</p>
<p>Move motor 1 (0b01) in reverse at a speed of 16/31 of full speed. The
resulting byte should contain <code class="docutils literal"><span class="pre">0b01110000</span></code>, which has an ascii value of
&#8220;p&#8221;.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">packet</span> <span class="o">=</span> <span class="n">MotorPacket</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">packet</span><span class="o">.</span><span class="n">motor_id</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">packet</span><span class="o">.</span><span class="n">negative</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">packet</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="mi">16</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">chr</span><span class="p">(</span><span class="n">packet</span><span class="o">.</span><span class="n">as_byte</span><span class="p">)</span>
<span class="go">&#39;p&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Get each item separately.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">packet</span><span class="o">.</span><span class="n">motor_id</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">packet</span><span class="o">.</span><span class="n">negative</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">packet</span><span class="o">.</span><span class="n">speed</span>
<span class="go">16</span>
</pre></div>
</div>
<p>Since the size of the fields were defined in <cite>_MotorPacketBits</cite>, we can set each
portion individually without needing to perform bit manipulation. What we did is
the equivalent of:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">motor_id</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">negative</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speed</span> <span class="o">=</span> <span class="mi">16</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">packet</span> <span class="o">=</span> <span class="n">motor_id</span> <span class="o">+</span> <span class="n">negative</span> <span class="o">+</span> <span class="n">speed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">chr</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span>
<span class="go">&#39;p&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Get each item separately.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">packet</span> <span class="o">&gt;&gt;</span> <span class="mi">6</span>  <span class="c"># motor_id</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">packet</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">)</span>  <span class="c"># negative</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">packet</span> <span class="o">&amp;</span> <span class="mb">0b11111</span>  <span class="c"># speed</span>
<span class="go">16</span>
</pre></div>
</div>
<dl class="class">
<dt id="rpi.bitfields.ArmPacket">
<em class="property">class </em><code class="descclassname">rpi.bitfields.</code><code class="descname">ArmPacket</code><a class="reference internal" href="_modules/rpi/bitfields.html#ArmPacket"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.bitfields.ArmPacket" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">_ctypes.Union</span></code></p>
<p>The packet sent to the arm mbed.</p>
<p>When the Raspberry Pi is connected to the mbed, arm control information
is encoded as a single byte.</p>
<p>Using a union allows us to transmit the full byte to the mbed by using
<cite>packet.as_byte</cite>, and ensures that it would be exactly eight bits long.</p>
<dl class="attribute">
<dt id="rpi.bitfields.ArmPacket.mode">
<code class="descname">mode</code><a class="headerlink" href="#rpi.bitfields.ArmPacket.mode" title="Permalink to this definition">¶</a></dt>
<dd><p><em>2 bits</em></p>
<p>The control mode of the arm.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.ArmPacket.linear">
<code class="descname">linear</code><a class="headerlink" href="#rpi.bitfields.ArmPacket.linear" title="Permalink to this definition">¶</a></dt>
<dd><p><em>2 bits</em></p>
<p>The direction in which to move the linear extension servo of the arm.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.ArmPacket.pitch">
<code class="descname">pitch</code><a class="headerlink" href="#rpi.bitfields.ArmPacket.pitch" title="Permalink to this definition">¶</a></dt>
<dd><p><em>2 bits</em></p>
<p>The direction in which to move the pitch servo of the arm.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.ArmPacket.yaw">
<code class="descname">yaw</code><a class="headerlink" href="#rpi.bitfields.ArmPacket.yaw" title="Permalink to this definition">¶</a></dt>
<dd><p><em>2 bits</em></p>
<p>The direction in which to move the yaw servo of the arm.</p>
</dd></dl>

<p class="rubric">Notes</p>
<p>Anonymous usage is the bitfield, <cite>b</cite>. The full byte can be accessed via
<cite>as_byte</cite>.</p>
</dd></dl>

<dl class="class">
<dt id="rpi.bitfields.CurrentAlerts">
<em class="property">class </em><code class="descclassname">rpi.bitfields.</code><code class="descname">CurrentAlerts</code><a class="reference internal" href="_modules/rpi/bitfields.html#CurrentAlerts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.bitfields.CurrentAlerts" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">_ctypes.Union</span></code></p>
<p>The union for the Mask/Enable register of <cite>CurrentSensor</cite>.</p>
<p>The current sensor used here is the Texas Instruments INA226 Current/Power
Monitor. The Mask/Enable register details are shown on pages 21 and 22 of
the datasheet. <a class="footnote-reference" href="#id2" id="id1">[1]</a></p>
<p>The Mask/Enable Register selects the function that is enabled to control
the Alert pin, as well as how that pin functions. If multiple functions
are enabled, the highest significant bit position Alert Function (D11-D15)
takes priority and responds to the Alert Limit register.</p>
<dl class="attribute">
<dt id="rpi.bitfields.CurrentAlerts.shunt_ol">
<code class="descname">shunt_ol</code><a class="headerlink" href="#rpi.bitfields.CurrentAlerts.shunt_ol" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether to trigger an alert when the shunt voltage goes over the limit.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentAlerts.shunt_ul">
<code class="descname">shunt_ul</code><a class="headerlink" href="#rpi.bitfields.CurrentAlerts.shunt_ul" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether to trigger an alert when the shunt voltage goes below the
limit.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentAlerts.bus_ol">
<code class="descname">bus_ol</code><a class="headerlink" href="#rpi.bitfields.CurrentAlerts.bus_ol" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether to trigger an alert when the bus voltage goes over the limit.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentAlerts.bus_ul">
<code class="descname">bus_ul</code><a class="headerlink" href="#rpi.bitfields.CurrentAlerts.bus_ul" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether to trigger an alert when the bus voltage goes under the limit.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentAlerts.power_ol">
<code class="descname">power_ol</code><a class="headerlink" href="#rpi.bitfields.CurrentAlerts.power_ol" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether to trigger an alert when the power goes over the limit.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentAlerts.conv_watch">
<code class="descname">conv_watch</code><a class="headerlink" href="#rpi.bitfields.CurrentAlerts.conv_watch" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether to trigger an alert when a conversion is ready.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentAlerts.empty">
<code class="descname">empty</code><a class="headerlink" href="#rpi.bitfields.CurrentAlerts.empty" title="Permalink to this definition">¶</a></dt>
<dd><p><em>5 bits</em></p>
<p>Not used.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentAlerts.alert_func">
<code class="descname">alert_func</code><a class="headerlink" href="#rpi.bitfields.CurrentAlerts.alert_func" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether the alert was triggered by an alert function.
(<cite>shunt_ol</cite>, <cite>shunt_ul</cite>, <cite>bus_ol</cite>, <cite>bus_ul</cite>, <cite>power_ol</cite>)</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentAlerts.conv_flag">
<code class="descname">conv_flag</code><a class="headerlink" href="#rpi.bitfields.CurrentAlerts.conv_flag" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether the alert was triggered by a conversion becoming ready.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentAlerts.overflow">
<code class="descname">overflow</code><a class="headerlink" href="#rpi.bitfields.CurrentAlerts.overflow" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether the alert was triggered by a math overflow.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentAlerts.invert">
<code class="descname">invert</code><a class="headerlink" href="#rpi.bitfields.CurrentAlerts.invert" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether to invert the alert polarity. Default is <code class="docutils literal"><span class="pre">False</span></code>. If
<code class="docutils literal"><span class="pre">True</span></code>, the alert line would be <code class="docutils literal"><span class="pre">HIGH</span></code> when active.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentAlerts.latch">
<code class="descname">latch</code><a class="headerlink" href="#rpi.bitfields.CurrentAlerts.latch" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether to latch the alert and flag bits, even after the fault has
cleared. Default is <code class="docutils literal"><span class="pre">False</span></code>.</p>
</dd></dl>

<p class="rubric">Notes</p>
<p>Anonymous usage is the bitfield, <cite>b</cite>. The full byte can be accessed via
<cite>as_byte</cite>.</p>
<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Texas Instruments, INA226 datasheet.
<a class="reference external" href="http://www.ti.com/lit/ds/symlink/ina226.pdf">http://www.ti.com/lit/ds/symlink/ina226.pdf</a></td></tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="rpi.bitfields.CurrentConfiguration">
<em class="property">class </em><code class="descclassname">rpi.bitfields.</code><code class="descname">CurrentConfiguration</code><a class="reference internal" href="_modules/rpi/bitfields.html#CurrentConfiguration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.bitfields.CurrentConfiguration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">_ctypes.Union</span></code></p>
<p>The union for the configuration register of <cite>CurrentSensor</cite>.</p>
<p>The current sensor used here is the Texas Instruments INA226 Current/Power
Monitor. The configuration register details are shown on pages 18 and 19
of the datasheet. <a class="footnote-reference" href="#id4" id="id3">[2]</a></p>
<p>The Configuration Register settings control the operating modes for the
INA226. This register controls the conversion time settings for both the
shunt and bus voltage measurements as well as the averaging mode used. The
operating mode that controls what signals are selected to be measured is
also programmed in the Configuration Register.</p>
<p>The Configuration Register can be read from at any time without impacting
or affecting the device settings or a conversion in progress. Writing to
the Configuration Register will halt any conversion in progress until the
write sequence is completed resulting in a new conversion starting based
on the new contents of the Configuration Register. This prevents any
uncertainty in the conditions used for the next completed conversion.</p>
<dl class="attribute">
<dt id="rpi.bitfields.CurrentConfiguration.reset">
<code class="descname">reset</code><a class="headerlink" href="#rpi.bitfields.CurrentConfiguration.reset" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether to reset.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentConfiguration.empty">
<code class="descname">empty</code><a class="headerlink" href="#rpi.bitfields.CurrentConfiguration.empty" title="Permalink to this definition">¶</a></dt>
<dd><p><em>3 bits</em></p>
<p>Not used.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentConfiguration.avg">
<code class="descname">avg</code><a class="headerlink" href="#rpi.bitfields.CurrentConfiguration.avg" title="Permalink to this definition">¶</a></dt>
<dd><p><em>3 bits</em></p>
<p>Averaging mode. Can range between 0 and 7.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentConfiguration.bus_ct">
<code class="descname">bus_ct</code><a class="headerlink" href="#rpi.bitfields.CurrentConfiguration.bus_ct" title="Permalink to this definition">¶</a></dt>
<dd><p><em>3 bits</em></p>
<p>Bus voltage conversion time. Can range between 0 and 7.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentConfiguration.shunt_ct">
<code class="descname">shunt_ct</code><a class="headerlink" href="#rpi.bitfields.CurrentConfiguration.shunt_ct" title="Permalink to this definition">¶</a></dt>
<dd><p><em>3 bits</em></p>
<p>Shunt voltage conversion time. Can range between 0 and 7.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.CurrentConfiguration.mode">
<code class="descname">mode</code><a class="headerlink" href="#rpi.bitfields.CurrentConfiguration.mode" title="Permalink to this definition">¶</a></dt>
<dd><p><em>3 bits</em></p>
<p>Operating mode. Can range between 0 and 7.</p>
</dd></dl>

<p class="rubric">Notes</p>
<p>Anonymous usage is the bitfield, <cite>b</cite>. The full byte can be accessed via
<cite>as_byte</cite>.</p>
<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[2]</a></td><td>Texas Instruments, INA 226 datasheet.
<a class="reference external" href="http://www.ti.com/lit/ds/symlink/ina226.pdf">http://www.ti.com/lit/ds/symlink/ina226.pdf</a></td></tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="rpi.bitfields.MotorPacket">
<em class="property">class </em><code class="descclassname">rpi.bitfields.</code><code class="descname">MotorPacket</code><a class="reference internal" href="_modules/rpi/bitfields.html#MotorPacket"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.bitfields.MotorPacket" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">_ctypes.Union</span></code></p>
<p>The packet sent to the motors.</p>
<p>When the Raspberry Pi is connected to the mbed, motor control information
is encoded as a single byte.</p>
<p>Using a union allows us to transmit the full byte to the mbed by using
<cite>packet.as_byte</cite>, and ensures that it would be exactly eight bits long.</p>
<dl class="attribute">
<dt id="rpi.bitfields.MotorPacket.motor_id">
<code class="descname">motor_id</code><a class="headerlink" href="#rpi.bitfields.MotorPacket.motor_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>2 bits</em></p>
<p>The motor ID. Can range between 0 and 3.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.MotorPacket.negative">
<code class="descname">negative</code><a class="headerlink" href="#rpi.bitfields.MotorPacket.negative" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether the speed is negative.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.bitfields.MotorPacket.speed">
<code class="descname">speed</code><a class="headerlink" href="#rpi.bitfields.MotorPacket.speed" title="Permalink to this definition">¶</a></dt>
<dd><p><em>5 bits</em></p>
<p>The magnitude of the speed. Can range between 0 and 31.</p>
</dd></dl>

<p class="rubric">Notes</p>
<p>Anonymous usage is the bitfield, <cite>b</cite>. The full byte can be accessed via
<cite>as_byte</cite>.</p>
</dd></dl>

</div>
<div class="section" id="module-rpi.client">
<span id="rpi-client-module"></span><h2>rpi.client module<a class="headerlink" href="#module-rpi.client" title="Permalink to this headline">¶</a></h2>
<p>Communicate with the base station and run the robot.</p>
<p>The client obtains motor speeds and arm commands from the base station, and
relays them to the respective mbed.</p>
<p>If the received speed for a flipper is zero, it attempts to hold the position
based on potentiometer data received from the body mbed. It also does not allow
the flipper to move beyond the capabilities of the potentiometer.</p>
<p>The client also obtains the currents going to individual motors from current
sensors connected via I2C. In addition, front and rear body pose are returned
via two I2C-connected IMUs.</p>
<p>From the arm mbed, the client receives servo positions, voltages, and currents;
two 4x4 temperature matrices; and readings from a CO<sub>2</sub> sensor attached to the
arm.</p>
<p>All external sensor data is sent back to the base station asynchronously via
UDP.</p>
<dl class="class">
<dt id="rpi.client.Client">
<em class="property">class </em><code class="descclassname">rpi.client.</code><code class="descname">Client</code><span class="sig-paren">(</span><em>client_address</em>, <em>server_address</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/client.html#Client"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.client.Client" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.4/library/functions.html#object" title="(in Python v3.4)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>A client to communicate with the base station and control the robot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>client_address</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; The local IP address of Yozakura.</li>
<li><strong>server_address</strong> (<em>2-tuple of (str, int)</em>) &#8211; The address at which the server is listening. The elements are the
server IP address and the port number respectively.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">NoConnectionError</span></code> &#8211;
The client cannot connect to the base station.</p>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="rpi.client.Client.request">
<code class="descname">request</code><a class="headerlink" href="#rpi.client.Client.request" title="Permalink to this definition">¶</a></dt>
<dd><p><em>socket</em></p>
<p>Handles communication with the server.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.client.Client.server_address">
<code class="descname">server_address</code><a class="headerlink" href="#rpi.client.Client.server_address" title="Permalink to this definition">¶</a></dt>
<dd><p><em>2-tuple of (str, int)</em></p>
<p>The address at which the server is listening. The elements are the
server IP address and the port number respectively.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.client.Client.motors">
<code class="descname">motors</code><a class="headerlink" href="#rpi.client.Client.motors" title="Permalink to this definition">¶</a></dt>
<dd><p><em>dict</em></p>
<p>Contains all registered motors.</p>
<p><strong>Dictionary format :</strong> {name (str): motor (Motor)}</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.client.Client.mbeds">
<code class="descname">mbeds</code><a class="headerlink" href="#rpi.client.Client.mbeds" title="Permalink to this definition">¶</a></dt>
<dd><p><em>dict</em></p>
<p>Contains all registered serial connections.</p>
<p><strong>Dictionary format :</strong> {name (str): connection (Serial)}</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.client.Client.current_sensors">
<code class="descname">current_sensors</code><a class="headerlink" href="#rpi.client.Client.current_sensors" title="Permalink to this definition">¶</a></dt>
<dd><p><em>dict</em></p>
<p>Contains all registered current sensors.</p>
<p><strong>Dictionary format :</strong> {name (str): sensor (CurrentSensor)}</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.client.Client.imus">
<code class="descname">imus</code><a class="headerlink" href="#rpi.client.Client.imus" title="Permalink to this definition">¶</a></dt>
<dd><p><em>dict</em></p>
<p>Contains all registered IMUs.</p>
<p><strong>Dictionary format :</strong> {name (str): imu (IMU)}</p>
</dd></dl>

<dl class="method">
<dt id="rpi.client.Client.add_current_sensor">
<code class="descname">add_current_sensor</code><span class="sig-paren">(</span><em>sensor</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/client.html#Client.add_current_sensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.client.Client.add_current_sensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a current sensor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sensor</strong> (<a class="reference internal" href="#rpi.devices.CurrentSensor" title="rpi.devices.CurrentSensor"><em>CurrentSensor</em></a>) &#8211; The current sensor associated with the motor.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpi.client.Client.add_imu">
<code class="descname">add_imu</code><span class="sig-paren">(</span><em>imu</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/client.html#Client.add_imu"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.client.Client.add_imu" title="Permalink to this definition">¶</a></dt>
<dd><p>Register an IMU.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>imu</strong> (<a class="reference internal" href="#rpi.devices.IMU" title="rpi.devices.IMU"><em>IMU</em></a>) &#8211; The IMU to be added.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpi.client.Client.add_mbed">
<code class="descname">add_mbed</code><span class="sig-paren">(</span><em>name</em>, <em>ser</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/client.html#Client.add_mbed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.client.Client.add_mbed" title="Permalink to this definition">¶</a></dt>
<dd><p>Register an mbed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; The name of the device.</li>
<li><strong>ser</strong> (<em>Mbed</em>) &#8211; The serial connection to the mbed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpi.client.Client.add_motor">
<code class="descname">add_motor</code><span class="sig-paren">(</span><em>motor</em>, <em>ser=None</em>, <em>pwm_pins=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/client.html#Client.add_motor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.client.Client.add_motor" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up and register a motor.</p>
<p>This method must be called before <cite>run</cite>. Either <cite>ser</cite> or
<cite>pwm_pins</cite> must be provided.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>motor</strong> (<a class="reference internal" href="#rpi.motor.Motor" title="rpi.motor.Motor"><em>Motor</em></a>) &#8211; The motor to be registered.</li>
<li><strong>ser</strong> (<em>Serial, optional</em>) &#8211; The serial connection to communicate with the mbed to which the
motor drivers are connected. This is needed in order to enable
hardware PWM.</li>
<li><strong>pwm_pins</strong> (<em>2-tuple of ints, optional</em>) &#8211; The pins used for soft PWM. The elements are the PWM pin and the
DIR pin, respectively.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">NoDriversError</span></code> &#8211;
Neither <cite>ser</cite> nor <cite>pwm_pins</cite> have been provided.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpi.client.Client.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/client.html#Client.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.client.Client.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Send and handle requests until a <cite>KeyboardInterrupt</cite> is received.</p>
<p>This method connects to the server, and loops forever. It takes the
speed and arm commands from the base station, and manages the outputs.
It attempts to hold the flipper position if there is no input.</p>
<p>If the connection is lost, it shuts down the motors as an emergency
measure. The motors would continue working if the connection to the
base station is re-established.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">MotorCountError</span></code> &#8211;
There are fewer than four motors registered.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">NoMbedError</span></code> &#8211;
The body mbed is not registered, or no mbeds are registered.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpi.client.Client.shutdown">
<code class="descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/client.html#Client.shutdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.client.Client.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Shut down the client.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-rpi.devices">
<span id="rpi-devices-module"></span><h2>rpi.devices module<a class="headerlink" href="#module-rpi.devices" title="Permalink to this headline">¶</a></h2>
<p>Classes for using I2C devices.</p>
<p>Provides a generic I2CDevice class to simplify work with I2C devices, as well as
separate classes for each supported device. The following devices are currently
supported:</p>
<ul class="simple">
<li>Texas Instruments INA226 Current/Power Monitor <a class="footnote-reference" href="#id7" id="id5">[3]</a></li>
<li>Invenense MPU-9150 9-axis MEMS MotionTracking Device <a class="footnote-reference" href="#id8" id="id6">[4]</a></li>
</ul>
<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[3]</a></td><td>Texas Instruments, INA 226 datasheet.
<a class="reference external" href="http://www.ti.com/lit/ds/symlink/ina226.pdf">http://www.ti.com/lit/ds/symlink/ina226.pdf</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6">[4]</a></td><td>Invensense, MPU-9150 Product Specification.
<a class="reference external" href="http://www.invensense.com/mems/gyro/documents/PS-MPU-9150A-00v4_3.pdf">http://www.invensense.com/mems/gyro/documents/PS-MPU-9150A-00v4_3.pdf</a></td></tr>
</tbody>
</table>
<dl class="class">
<dt id="rpi.devices.CurrentSensor">
<em class="property">class </em><code class="descclassname">rpi.devices.</code><code class="descname">CurrentSensor</code><span class="sig-paren">(</span><em>address</em>, <em>name='Current Sensor'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/devices.html#CurrentSensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.devices.CurrentSensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rpi.devices.I2CDevice" title="rpi.devices.I2CDevice"><code class="xref py py-class docutils literal"><span class="pre">rpi.devices.I2CDevice</span></code></a></p>
<p>Texas Instruments INA226 Current/Power Monitor. <a class="footnote-reference" href="#id10" id="id9">[5]</a></p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The current sensor must be calibrated before use.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/functions.html#int" title="(in Python v3.4)"><em>int</em></a>) &#8211; The address of the device.</li>
<li><strong>name</strong> (<em>str, optional</em>) &#8211; The name of the device.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="rpi.devices.CurrentSensor.address">
<code class="descname">address</code><a class="headerlink" href="#rpi.devices.CurrentSensor.address" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>The address of the device.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.devices.CurrentSensor.pin_alert">
<code class="descname">pin_alert</code><a class="headerlink" href="#rpi.devices.CurrentSensor.pin_alert" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>The alert pin of the device. None if not connected.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.devices.CurrentSensor.name">
<code class="descname">name</code><a class="headerlink" href="#rpi.devices.CurrentSensor.name" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em></p>
<p>The name of the device.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.devices.CurrentSensor.registers">
<code class="descname">registers</code><a class="headerlink" href="#rpi.devices.CurrentSensor.registers" title="Permalink to this definition">¶</a></dt>
<dd><p><em>dict</em></p>
<p>Contains the addresses of each register.</p>
<p><strong>Dictionary format :</strong> {register (str): address (int)}</p>
<dl class="docutils">
<dt>config <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Configuration register</dd>
<dt>v_shunt <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Shunt voltage measurement register</dd>
<dt>v_bus <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Bus voltage measurement register</dd>
<dt>power <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Power measurement register</dd>
<dt>current <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Current measurement register</dd>
<dt>calib <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Calibration register</dd>
<dt>alert_reg <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Mask/Enable register</dd>
<dt>alert_lim <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Alert limit register</dd>
<dt>die <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Die ID</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="rpi.devices.CurrentSensor.lsbs">
<code class="descname">lsbs</code><a class="headerlink" href="#rpi.devices.CurrentSensor.lsbs" title="Permalink to this definition">¶</a></dt>
<dd><p><em>dict</em></p>
<p>Contains the value of the least significant bit of each measurement
register.</p>
<p><strong>Dictionary format :</strong> {register (str): lsb (float)}</p>
<dl class="docutils">
<dt>v_shunt <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Shunt voltage result register</dd>
<dt>v_bus <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Bus voltage result register</dd>
<dt>power <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Power result register</dd>
<dt>current <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Current result register</dd>
</dl>
</dd></dl>

<p class="rubric">Notes</p>
<p>All words are big endian.</p>
<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id10" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[5]</a></td><td>Texas Instruments, INA 226 datasheet.
<a class="reference external" href="http://www.ti.com/lit/ds/symlink/ina226.pdf">http://www.ti.com/lit/ds/symlink/ina226.pdf</a></td></tr>
</tbody>
</table>
<dl class="method">
<dt id="rpi.devices.CurrentSensor.calibrate">
<code class="descname">calibrate</code><span class="sig-paren">(</span><em>max_current</em>, <em>r_shunt=0.002</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/devices.html#CurrentSensor.calibrate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.devices.CurrentSensor.calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate the current sensor.</p>
<p>The device must be calibrated before use. Calibration sets the
calibration register, and determines the LSB values for the current
and power measurement registers.</p>
<p>The minimum usable max_current is 2.6 A, with a resolution of 0.08 mA.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>max_current</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/functions.html#float" title="(in Python v3.4)"><em>float</em></a>) &#8211; The maximum current expected, in amperes.</li>
<li><strong>r_shunt</strong> (<em>float, optional</em>) &#8211; The resistance of the shunt resistor, in ohms. The resistor used on
the sensor module <a class="footnote-reference" href="#id12" id="id11">[6]</a> is 0.002 ohms.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">BadArgError</span></code> &#8211;
The max_current value is too small.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id12" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id11">[6]</a></td><td>Strawberry Linux, INA226モジュール説明書. (Japanese only.)
<a class="reference external" href="https://strawberry-linux.com/pub/ina226-manual.pdf">https://strawberry-linux.com/pub/ina226-manual.pdf</a></td></tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpi.devices.CurrentSensor.get_alerts">
<code class="descname">get_alerts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/devices.html#CurrentSensor.get_alerts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.devices.CurrentSensor.get_alerts" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the state of the alerts.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>flags</strong> &#8211;
Contains the state of the alerts. Dictionary fields:<dl class="docutils">
<dt>aff <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Alert function flag</dd>
<dt>cvrf <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Conversion ready flag</dd>
<dt>ovf <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Math overflow flag</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3.4/library/stdtypes.html#dict" title="(in Python v3.4)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpi.devices.CurrentSensor.get_configuration">
<code class="descname">get_configuration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/devices.html#CurrentSensor.get_configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.devices.CurrentSensor.get_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the current sensor configuration.</p>
<p>See pages 18 and 19 in the datasheet <a class="footnote-reference" href="#id14" id="id13">[7]</a> for more information.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>config</strong> &#8211;
The configuration word. Bit fields:<dl class="docutils">
<dt>reset <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Whether to reset.</dd>
<dt>empty <span class="classifier-delimiter">:</span> <span class="classifier">3 bits</span></dt>
<dd>Not used.</dd>
<dt>avg <span class="classifier-delimiter">:</span> <span class="classifier">3 bits</span></dt>
<dd>Averaging mode. Can range between 0 and 7.</dd>
<dt>bus_ct <span class="classifier-delimiter">:</span> <span class="classifier">3 bits</span></dt>
<dd>Bus voltage conversion time. Can range between 0 and 7.</dd>
<dt>shunt_ct <span class="classifier-delimiter">:</span> <span class="classifier">3 bits</span></dt>
<dd>Shunt voltage conversion time. Can range between 0 and 7.</dd>
<dt>mode <span class="classifier-delimiter">:</span> <span class="classifier">3 bits</span></dt>
<dd>Operating mode. Can range between 0 and 7.</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#rpi.bitfields.CurrentConfiguration" title="rpi.bitfields.CurrentConfiguration">CurrentConfiguration</a></td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">bitfields.CurrentConfiguration()</span></code></p>
</div>
<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id14" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id13">[7]</a></td><td>Texas Instruments, INA 226 datasheet.
<a class="reference external" href="http://www.ti.com/lit/ds/symlink/ina226.pdf">http://www.ti.com/lit/ds/symlink/ina226.pdf</a></td></tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpi.devices.CurrentSensor.get_measurement">
<code class="descname">get_measurement</code><span class="sig-paren">(</span><em>register</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/devices.html#CurrentSensor.get_measurement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.devices.CurrentSensor.get_measurement" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the measurement in a register.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>register</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; The name of the register to be read.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The value of the measurement, in natural units.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="https://docs.python.org/3.4/library/functions.html#float" title="(in Python v3.4)">float</a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">BadArgError</span></code> &#8211;
The register specified does not contain a measurement.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">NotCalibratedError</span></code> &#8211;
The device has not yet been calibrated.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="rpi.devices.CurrentSensor.iv">
<code class="descname">iv</code><a class="headerlink" href="#rpi.devices.CurrentSensor.iv" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current (A) and voltage (V) read by the sensor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The current and voltage readings of the sensor.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">2-tuple of float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpi.devices.CurrentSensor.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/devices.html#CurrentSensor.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.devices.CurrentSensor.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the current sensor.</p>
</dd></dl>

<dl class="method">
<dt id="rpi.devices.CurrentSensor.set_alerts">
<code class="descname">set_alerts</code><span class="sig-paren">(</span><em>alert</em>, <em>limit</em>, <em>ready=False</em>, <em>invert=False</em>, <em>latch=False</em>, <em>pin_alert=None</em>, <em>interrupt=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/devices.html#CurrentSensor.set_alerts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.devices.CurrentSensor.set_alerts" title="Permalink to this definition">¶</a></dt>
<dd><p>Choose the alert function and set up the alert behaviour.</p>
<p>See pages 21 and 22 of the datasheet <a class="footnote-reference" href="#id16" id="id15">[8]</a> for more information.</p>
<p>Only one alert function may be selected. The five possible alert
functions are:</p>
<blockquote>
<div><dl class="docutils">
<dt>sol <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Shunt voltage over limit.</dd>
<dt>sul <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Shunt voltage under limit.</dd>
<dt>bol <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Bus voltage over limit.</dd>
<dt>bul <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Bus voltage under limit.</dd>
<dt>pol <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Power over limit.</dd>
</dl>
</div></blockquote>
<p>In addition, three bits can be used to set the Mask/Enable register&#8217;s
behaviour. The three flags are:</p>
<blockquote>
<div><dl class="docutils">
<dt>cnvr <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Conversion ready</dd>
<dt>apol <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Invert alert polarity</dd>
<dt>len <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Alert latch enable</dd>
</dl>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>alert</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; The alert function to be enabled.</li>
<li><strong>limit</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/functions.html#float" title="(in Python v3.4)"><em>float</em></a>) &#8211; The limit at which the alert is triggered, in natural units.</li>
<li><strong>ready</strong> (<em>bool, optional</em>) &#8211; Whether to trigger an alert if conversion ready.</li>
<li><strong>invert</strong> (<em>bool, optional</em>) &#8211; Whether to invert the alert pin polarity.</li>
<li><strong>latch</strong> (<em>bool, optional</em>) &#8211; Whether to latch the alert output.</li>
<li><strong>pin_alert</strong> (<em>int, optional</em>) &#8211; The alert pin, if connected.</li>
<li><strong>interrupt</strong> (<em>bool, optional</em>) &#8211; Whether to enable interrupts.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id16" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id15">[8]</a></td><td>Texas Instruments, INA 226 datasheet.
<a class="reference external" href="http://www.ti.com/lit/ds/symlink/ina226.pdf">http://www.ti.com/lit/ds/symlink/ina226.pdf</a></td></tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpi.devices.CurrentSensor.set_configuration">
<code class="descname">set_configuration</code><span class="sig-paren">(</span><em>reset=None</em>, <em>avg=None</em>, <em>bus_ct=None</em>, <em>shunt_ct=None</em>, <em>mode=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/devices.html#CurrentSensor.set_configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.devices.CurrentSensor.set_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the current sensor.</p>
<p>See pages 18 and 19 in the datasheet. <a class="footnote-reference" href="#id18" id="id17">[9]</a> This function only changes
the parameters that are specified. All other parameters remain
unchanged.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>reset</strong> (<em>bool, optional</em>) &#8211; Whether to reset. This overrides all other data. Use via the
<cite>reset</cite> method.</li>
<li><strong>avg</strong> (<em>int, optional</em>) &#8211; The averaging mode. Can range between 0 and 7.</li>
<li><strong>bus_ct</strong> (<em>int, optional</em>) &#8211; Bus voltage conversion time. Can range between 0 and 7.</li>
<li><strong>shunt_ct</strong> (<em>int, optional</em>) &#8211; Shunt voltage conversion time. Can range between 0 and 7.</li>
<li><strong>mode</strong> (<em>int, optional</em>) &#8211; Operating mode. Can range between 0 and 7.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id18" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id17">[9]</a></td><td>Texas Instruments, INA 226 datasheet.
<a class="reference external" href="http://www.ti.com/lit/ds/symlink/ina226.pdf">http://www.ti.com/lit/ds/symlink/ina226.pdf</a></td></tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="rpi.devices.I2CDevice">
<em class="property">class </em><code class="descclassname">rpi.devices.</code><code class="descname">I2CDevice</code><span class="sig-paren">(</span><em>address</em>, <em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/devices.html#I2CDevice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.devices.I2CDevice" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.4/library/functions.html#object" title="(in Python v3.4)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Parent class for all I2C devices.</p>
<p>Provides registration and deregistration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/functions.html#int" title="(in Python v3.4)"><em>int</em></a>) &#8211; The address of the I2C device.</li>
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; The name of the device.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">YozakuraRuntimeError</span></code> &#8211;
Could not determine the Raspberry Pi version, and could thus not assign
the correct I2C bus.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">I2CSlotEmptyError</span></code> &#8211;
No devices could be found at the specified address.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">I2CSlotBusyError</span></code> &#8211;
The address is valid, but is currently being used by another device; or,
another device has already been registered at that address and has not
been removed yet.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="rpi.devices.I2CDevice.address">
<code class="descname">address</code><a class="headerlink" href="#rpi.devices.I2CDevice.address" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>The address of the I2C device.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.devices.I2CDevice.name">
<code class="descname">name</code><a class="headerlink" href="#rpi.devices.I2CDevice.name" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em></p>
<p>The name of the device.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.devices.I2CDevice.devices">
<code class="descname">devices</code><a class="headerlink" href="#rpi.devices.I2CDevice.devices" title="Permalink to this definition">¶</a></dt>
<dd><p><em>dict</em></p>
<p>Contains all registered devices.</p>
<p>Dictionary format: {address (str): device (I2CDevice)}</p>
</dd></dl>

<dl class="method">
<dt id="rpi.devices.I2CDevice.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/devices.html#I2CDevice.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.devices.I2CDevice.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Deregister the device.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="rpi.devices.IMU">
<em class="property">class </em><code class="descclassname">rpi.devices.</code><code class="descname">IMU</code><span class="sig-paren">(</span><em>settings_file='imu_settings'</em>, <em>address=None</em>, <em>name='MPU-9150'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/devices.html#IMU"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.devices.IMU" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rpi.devices.I2CDevice" title="rpi.devices.I2CDevice"><code class="xref py py-class docutils literal"><span class="pre">rpi.devices.I2CDevice</span></code></a></p>
<p>Invenense MPU-9150 9-axis MEMS MotionTracking Device. <a class="footnote-reference" href="#id21" id="id19">[10]</a></p>
<p>Simple wrapper for the RTIMU library by richards-tech <a class="footnote-reference" href="#id22" id="id20">[11]</a> for accessing
the sensor fusion data of the MPU-9150.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>settings_file</strong> (<em>str, optional</em>) &#8211; The location of the settings file, without the &#8221;.ini&#8221; extension.</li>
<li><strong>address</strong> (<em>int, optional</em>) &#8211; The address of the device. If provided, it overrides the I2C address
found in the settings file.</li>
<li><strong>name</strong> (<em>str, optional</em>) &#8211; The name of the device.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="rpi.devices.IMU.address">
<code class="descname">address</code><a class="headerlink" href="#rpi.devices.IMU.address" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>The address of the device.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.devices.IMU.poll_interval">
<code class="descname">poll_interval</code><a class="headerlink" href="#rpi.devices.IMU.poll_interval" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>The recommended poll interval, in milliseconds.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.devices.IMU.name">
<code class="descname">name</code><a class="headerlink" href="#rpi.devices.IMU.name" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em></p>
<p>The name of the device.</p>
</dd></dl>

<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id21" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id19">[10]</a></td><td>Invensense, MPU-9150 Product Specification.
<a class="reference external" href="http://www.invensense.com/mems/gyro/documents/PS-MPU-9150A-00v4_3.pdf">http://www.invensense.com/mems/gyro/documents/PS-MPU-9150A-00v4_3.pdf</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id22" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id20">[11]</a></td><td>RTIMULib, richards-tech, Github.
<a class="reference external" href="https://github.com/richards-tech/RTIMULib">https://github.com/richards-tech/RTIMULib</a></td></tr>
</tbody>
</table>
<dl class="attribute">
<dt id="rpi.devices.IMU.rpy">
<code class="descname">rpy</code><a class="headerlink" href="#rpi.devices.IMU.rpy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the roll, pitch, and yaw readings, in radians.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The roll, pitch, and yaw readings of the IMU, in radians.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">3-list of float</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="rpi-mbed-module">
<h2>rpi.mbed module<a class="headerlink" href="#rpi-mbed-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-rpi.motor">
<span id="rpi-motor-module"></span><h2>rpi.motor module<a class="headerlink" href="#module-rpi.motor" title="Permalink to this headline">¶</a></h2>
<p>Control the motors on the robot.</p>
<p>Motors expect at least one control method, which can be either a serial port
for microcontroller communication, or software PWM. Up to four motors can be
used.</p>
<p>The supported motor driver is the Pololu High-Power Motor Driver 18v15. <a class="footnote-reference" href="#id24" id="id23">[12]</a></p>
<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id24" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id23">[12]</a></td><td>Pololu, High-Power Motor Driver 18v15 datasheet.
<a class="reference external" href="https://www.pololu.com/product/755">https://www.pololu.com/product/755</a></td></tr>
</tbody>
</table>
<dl class="class">
<dt id="rpi.motor.Motor">
<em class="property">class </em><code class="descclassname">rpi.motor.</code><code class="descname">Motor</code><span class="sig-paren">(</span><em>name</em>, <em>fault_1</em>, <em>fault_2</em>, <em>reset</em>, <em>start_input=0</em>, <em>max_speed=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/motor.html#Motor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.motor.Motor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.4/library/functions.html#object" title="(in Python v3.4)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>A class representing the motor drivers used on Yozakura.</p>
<p>The motor driver used is the Pololu High-Power Motor Driver 18v15. <a class="footnote-reference" href="#id26" id="id25">[13]</a></p>
<p>After the motor is initialized and registered, at least one control method
must be added. These can be either a serial port connected to a
microcontroller for hardware PWM, or software PWM. If hardware PWM is used,
the software PWM will be ignored.</p>
<p>Up to four motors can be registered.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; The name of the motor.</li>
<li><strong>fault_1</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/functions.html#int" title="(in Python v3.4)"><em>int</em></a>) &#8211; GPIO pin for the motor Fault line, FF1.</li>
<li><strong>fault_2</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/functions.html#int" title="(in Python v3.4)"><em>int</em></a>) &#8211; GPIO pin for the motor Fault line, FF2.</li>
<li><strong>reset</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/functions.html#int" title="(in Python v3.4)"><em>int</em></a>) &#8211; GPIO pin for resetting the motor driver.</li>
<li><strong>start_input</strong> (<em>float, optional</em>) &#8211; The input at which the motor starts responding. The output will be
scaled between that value and one. For instance, if the motors do not
turn until the input is at 20%, an input of 10% would be scaled up to
28%, and 50% would be scaled up to 60%. Can range between 0 and 1.</li>
<li><strong>max_speed</strong> (<em>float, optional</em>) &#8211; The maximum speed to use with the motor. Can range between 0 and 1.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">BadArgError</span></code> &#8211;
Bad inputs are made.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">MotorCountError</span></code> &#8211;
A motor is added after all four motors have already been registered.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="rpi.motor.Motor.name">
<code class="descname">name</code><a class="headerlink" href="#rpi.motor.Motor.name" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em></p>
<p>The name of the motor.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.motor.Motor.motor_id">
<code class="descname">motor_id</code><a class="headerlink" href="#rpi.motor.Motor.motor_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>The motor ID. It is generated automatically.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.motor.Motor.pin_fault_1">
<code class="descname">pin_fault_1</code><a class="headerlink" href="#rpi.motor.Motor.pin_fault_1" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>The GPIO pin for the motor Fault line, FF1.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.motor.Motor.pin_fault_2">
<code class="descname">pin_fault_2</code><a class="headerlink" href="#rpi.motor.Motor.pin_fault_2" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>The GPIO pin for the motor Fault line, FF2.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.motor.Motor.pin_reset">
<code class="descname">pin_reset</code><a class="headerlink" href="#rpi.motor.Motor.pin_reset" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>GPIO pin for resetting the motor driver.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.motor.Motor.has_serial">
<code class="descname">has_serial</code><a class="headerlink" href="#rpi.motor.Motor.has_serial" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether a serial port is open, and hardware PWM is available.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.motor.Motor.has_pwm">
<code class="descname">has_pwm</code><a class="headerlink" href="#rpi.motor.Motor.has_pwm" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em></p>
<p>Whether software PWM is available.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.motor.Motor.ser">
<code class="descname">ser</code><a class="headerlink" href="#rpi.motor.Motor.ser" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Serial</em></p>
<p>The serial port to be used for communication.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.motor.Motor.pin_pwm">
<code class="descname">pin_pwm</code><a class="headerlink" href="#rpi.motor.Motor.pin_pwm" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>The GPIO pin for motor PWM line.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.motor.Motor.pin_dir">
<code class="descname">pin_dir</code><a class="headerlink" href="#rpi.motor.Motor.pin_dir" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>The GPIO pin for motor DIR line.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.motor.Motor.start_input">
<code class="descname">start_input</code><a class="headerlink" href="#rpi.motor.Motor.start_input" title="Permalink to this definition">¶</a></dt>
<dd><p><em>float</em></p>
<p>The input at which the motor starts responding.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.motor.Motor.max_speed">
<code class="descname">max_speed</code><a class="headerlink" href="#rpi.motor.Motor.max_speed" title="Permalink to this definition">¶</a></dt>
<dd><p><em>float</em></p>
<p>The maximum speed at which to run the motor.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpi.motor.Motor.motors">
<code class="descname">motors</code><a class="headerlink" href="#rpi.motor.Motor.motors" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em></p>
<p>Contains all registered motors.</p>
</dd></dl>

<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id26" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id25">[13]</a></td><td>Pololu, High-Power Motor Driver 18v15 datasheet.
<a class="reference external" href="https://www.pololu.com/product/755">https://www.pololu.com/product/755</a></td></tr>
</tbody>
</table>
<dl class="method">
<dt id="rpi.motor.Motor.drive">
<code class="descname">drive</code><span class="sig-paren">(</span><em>speed</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/motor.html#Motor.drive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.motor.Motor.drive" title="Permalink to this definition">¶</a></dt>
<dd><p>Drive the motor at a given speed.</p>
<p>The priority goes to the microcontroller if serial is enabled. Software
PWM is used if serial is not enabled.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>speed</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/functions.html#float" title="(in Python v3.4)"><em>float</em></a>) &#8211; A value from -1 to 1 indicating the requested speed.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">NoDriversError</span></code> &#8211;
Neither serial nor PWM are enabled.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpi.motor.Motor.enable_serial">
<code class="descname">enable_serial</code><span class="sig-paren">(</span><em>ser</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/motor.html#Motor.enable_serial"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.motor.Motor.enable_serial" title="Permalink to this definition">¶</a></dt>
<dd><p>Allow the use of a USB serial connection.</p>
<p>If it is enabled, speed commands will be sent to an external
microcontroller, such as an mbed, which will output the PWM signal.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ser</strong> (<em>Serial</em>) &#8211; Communicates with the external hardware.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpi.motor.Motor.enable_soft_pwm">
<code class="descname">enable_soft_pwm</code><span class="sig-paren">(</span><em>pwm</em>, <em>direction</em>, <em>frequency=28000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/motor.html#Motor.enable_soft_pwm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.motor.Motor.enable_soft_pwm" title="Permalink to this definition">¶</a></dt>
<dd><p>Allow software PWM to control the motor.</p>
<p>The motor in this case needs to be attached directly to the rpi. If
serial is also enabled, serial takes priority and software PWM is not
used.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pwm</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/functions.html#int" title="(in Python v3.4)"><em>int</em></a>) &#8211; The GPIO pin for the motor driver&#8217;s PWM line.</li>
<li><strong>direction</strong> (<a class="reference external" href="https://docs.python.org/3.4/library/functions.html#int" title="(in Python v3.4)"><em>int</em></a>) &#8211; The GPIO pin for the motor driver&#8217;s DIR line.</li>
<li><strong>frequency</strong> (<em>float, optional</em>) &#8211; The frequency of the software PWM.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpi.motor.Motor.reset_driver">
<code class="descname">reset_driver</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/motor.html#Motor.reset_driver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.motor.Motor.reset_driver" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the motor driver.</p>
</dd></dl>

<dl class="method">
<dt id="rpi.motor.Motor.shutdown">
<code class="descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/motor.html#Motor.shutdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.motor.Motor.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Shut down the motor.</p>
</dd></dl>

<dl class="classmethod">
<dt id="rpi.motor.Motor.shutdown_all">
<em class="property">classmethod </em><code class="descname">shutdown_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/rpi/motor.html#Motor.shutdown_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rpi.motor.Motor.shutdown_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Shut down all motors.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="opstn.html" class="btn btn-neutral" title="opstn package" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Kyoto University Mechatronics Laboratory.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0 RC',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>